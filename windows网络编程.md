****
分层？  
计算机网络是一个复杂的系统，为了降低设计难度，网络设计者以分层的方式组织协议，以及实现这些
协议的网路硬件和软件。
协议分层具有概念化和结构化优点
每一层都建立在它的下层之上，使用它的下层提供的服务，下层对它的上层隐藏服务的实现细节
协议是通信的一种约定
一组协议叫协议栈
国际标准化组织提出了OSI七层模型，（庞大复杂）应用层，表示层，会话层，传输层，网络层数据链路层，物理层
技术人员自己研发的TCP/IP协议栈
用ip（全球唯一）和端口号（主机内唯一）唯一标识一个特定的应用程序

***
基于TCP/IP协议栈的网络编程？  
常用套接字
流式套接字TCP
数据报套接字 UDP
原始套接字（网络层）
***
客户/服务器模型是最主要的进程交互的模型  
客户：请求的主动方
服务器：请求的被动方  不是一定的时间服务器是主动的（广播）

***
C/S模式  
服务器工作过程？  
1.打开一个通信通道，告知服务器进程所在的主机将要在某一个公认的端口上接收客户端请求
2.等待客户的请求到达该端口
3.服务器接收到请求，处理该请求并发送应答
4.返回2，等待并处理另一个客户请求
5.当特定条件满足时关闭服务器  

客户端主动请求方式，工作过程
1.打开一个通信通道，告知客户端进程所在主机将要向某一公认的端口上请求服务
2.向服务器发送请求报文，等待并接收应答，然后继续提出请求
3.请求结束后，关闭通信通道并终止进程

****
网络通信可以在TCP/IP的各层上实现，层次越低，数据操控的能力越强
***
字节顺序
大端顺序   高字节在低地址 低字节在高地址
小端顺序   高地址存高位，低地址存低位
主机字节顺序 整数在内存中保存的顺序
网络字节顺序 网络中发送和接收的数据 （大端）

***
结构的对齐与填充
内存对齐：
计算机内存空间是按照字节来划分的，从理论上讲任何类型的变量的访问可以从任何地址开始，但
实际上计算机系统对基本数据类型在内存中的存放位置有限制
要求数据存储的首地址是某个数的整数倍
按一定的顺序排列，而不是一个紧挨着一个排列

***
微软C编译器的对齐策略
1.结构体变量的首地址能够被其最宽基本数据类型成员的大小所整除
2.结构体每个成员相对于结构体首地址的偏移量都是成员大小的整数倍
3.结构体的总大小为结构体最宽基本类型成员大小的整数倍
#pragma pack（push，n） 以n个字节对齐
***
协议软件接口承担应用程序与操作系统协议实现之间的桥接作用
他封装了协议实现的基本功能
开放系统调用接口以简化操作
***
网络编程 必须有一种非常简单的方法与协议栈连接
协议软件接口实现方法：
发明新的系统调用
沿用一般io调用并扩充
***
在继承一般io操作的基础上，协议软件接口的设计扩展了若干环节：
扩展了文件描述符集：使应用程序可以创建能被网络通信所使用的描述符：套接字   
扩展了读写这两个系统调用，使其支持网络数据的接收和发送
增加了对通信双方的标识
指明通信所采用的协议
确定通信的角色
增加了对网络操作的控制

***
套接字
socket 
作为连接应用程序和协议实现的桥梁
在网络通信中支持TCP/IP网络通信的基本操作单元
可以看作是一个接口通过socket为客户和服务器建立了一个双向的网络通道

套接字的数据结构（抽象）
发送队列接收队列
状态
协议
端点地址

****
套接字通信
网络应用程序的通信总是以套接字为线索以五元组（源ip源端口目的ip目的端口协议）为通信
基础进行数据传输
***
使用套接字进行数据处理的两种方式（同步异步）
***
套接字通信的基本流程
建立一个socket
配置socket
连接socket
通过socket发送数据
通过socket接收数据
关闭socket

